<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href='https://fonts.googleapis.com/css?family=Ubuntu' rel='stylesheet' type='text/css'>
<!--jQuery UI CSS-->
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/smoothness/jquery-ui.css" type="text/css" media="screen" />
<!-- Exercises styles-->
<link rel="stylesheet" href="exercises.css" />
<!--jQuery and jQuery UI with jQuery Chat-->
<script type="text/javascript" src="jquery-1.8.3.js"></script>
<script type="text/javascript" src="jquery-ui.js"></script>
<link type="text/css" href="chatbox.css" rel="stylesheet" />
<script type="text/javascript" src="chatbox.js"></script>
<script src='moment.js'></script>
<script src='fullcalendar.js'></script>

<script type="text/javascript">

    function sendMessageDocToPatient(name, message, timestamp) {
        $("#chat_div").chatbox("option", "boxManager").addMsg(name, message, timestamp);
    }
    var getUrlParameter = function(param) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;

        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');

            if (sParameterName[0] === param) {
                return sParameterName[1] === undefined ? true : sParameterName[1];
            }
        }
    };

    var calendarSelectedDay;

    $(document).ready(function() {

        calendarSelectedDay = getUrlParameter("date");

        var numberOfMessages = 0;
        box = $("#chat_div").chatbox( {
            id:"Me",
            title : "Messages to Doc Brown",

            messageSent : function(id, user, msg) {
                var now = new Date();
                console.log(now.getHours());
                console.log(now.getMinutes());

                var am_pm;
                if (now.getHours() >= 12) {
                    am_pm = "PM";
                } else {
                    am_pm = "AM";
                }

                var hours;
                if (now.getHours() == 0) {
                    hours = "12";
                } else if (now.getHours() > 12) {
                    hours = now.getHours() - 12;
                } else {
                    hours = now.getHours();
                }

                var timestamp = hours + ":" + now.getMinutes() + " " + am_pm;

                $("#chat_div").chatbox("option", "boxManager").addMsg(id, msg, timestamp);
                numberOfMessages += 1;
                if (numberOfMessages == 1) {
                    setTimeout('sendMessageDocToPatient("Doc Brown", "I\'ll take care of it!", "' + timestamp + '");', 2000);
                }
            }
        });

        if (numberOfMessages == 0) {
            sendMessageDocToPatient("Doc Brown", "How's the training going?", "12:00 PM");
        }

    });



</script>
</head>
<body>

<div class="page_title" height="100%">
    <button class="page_title_text" onclick="location.href='index.html'">PhysicalRehab.io</button>
    <button id="x-button" class="x-button" onclick="location.href='index.html?date='+calendarSelectedDay">&#10006;</button>
</div>

<div class="top">
    <div class="description">
        <p class="description_header">30 Jumping Jacks</p>
        <p class="description_text">Stand with feet together, knees slightly bent, and arms to sides. Jump while raising arms and separating legs to sides. Land on forefoot with legs apart and arms overhead. Jump again while lower arms and returning legs to midline. Land on forefoot with arms and legs in original position. Repeat 30 times.</p>
    </div>
    <div class="video">
        <iframe class="exercise_video" src="https://www.youtube.com/embed/UpH7rm0cYbM" frameborder="0" allowfullscreen></iframe>
    </div>
    <div id="messages" class="messages">
        <div id="chat_div"></div>
    </div>
</div>

<div class="bottom">
    <div class="clock"></div>
    <div class="check">
        <a title="Complete?" href="index.html?status=check&exercise=jumping_jacks" onclick="location.href=this.href+'&date='+calendarSelectedDay; return false;" class="button-check"></a>
    </div>
    <div class="flag">
        <a title="Having trouble?" href="index.html?status=flag&exercise=jumping_jacks" onclick="location.href=this.href+'&date='+calendarSelectedDay; return false;"class="button-flag"></a>
    </div>

</div>

</body>
</html>